{"version":3,"sources":["component/ProtectedRoute.js","component/Login/Login.js","component/Main/Main.js","component/App/App.js","index.js"],"names":["ProtectedRoute","Component","component","props","isLoggedIn","to","Login","onLogin","useState","name","password","loginData","setLoginData","error","setError","handleChange","e","target","value","trim","className","onSubmit","preventDefault","type","onChange","placeholder","Main","currentUser","first","last","src","picture","large","alt","App","setIsLoggedIn","userInfo","setUserInfo","history","useHistory","useEffect","push","setCurrentUser","fetch","method","headers","then","res","ok","json","Promise","reject","Error","status","results","catch","err","console","log","path","data","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.a44641b9.chunk.js","sourcesContent":["import React from 'react';\r\nimport { Redirect, Route } from 'react-router-dom';\r\n\r\nconst ProtectedRoute = ({ component: Component, ...props }) => {\r\n  return (\r\n    <Route>\r\n      {\r\n        () => props.isLoggedIn ? <Component {...props} /> : <Redirect to=\"/sign-in\" />\r\n      }\r\n    </Route>\r\n  )\r\n}\r\n\r\nexport default ProtectedRoute;","import React, { useState } from 'react';\r\n\r\nexport default function Login({onLogin}){\r\n\r\n  const [loginData, setLoginData] = useState({\r\n    name: '',\r\n    password: '',\r\n  });\r\n\r\n  const [error, setError] = useState(false)\r\n\r\n\r\n  const handleChange = (e) => {\r\n    const { name, value } = e.target;\r\n    if(e.target.value === ' '){\r\n      setError(true)\r\n    } else {\r\n      setError(false)\r\n      setLoginData({\r\n        ...loginData,\r\n        [name]: value.trim()\r\n      });\r\n    }\r\n  };\r\n\r\n\r\n  function handleSubmit(e){\r\n    e.preventDefault();\r\n    \r\n    if (!loginData.name || !loginData.password) {\r\n      return;\r\n    }\r\n\r\n    onLogin(loginData)\r\n  }\r\n  \r\n\r\n  return (\r\n    <div className=\"login\">\r\n      <h2 className=\"login__header\">Авторизация</h2>\r\n      <form onSubmit={handleSubmit} className=\"login__form\">\r\n        <input type=\"text\" name=\"name\" onChange={handleChange} value={loginData.name || ''} className=\"login__input\" placeholder=\"Ваше имя\"></input>\r\n        <input type=\"password\" name=\"password\" onChange={handleChange} value={loginData.password || ''} className=\"login__input\" placeholder=\"Пароль\"></input>\r\n        <span className={error ? `error__visible`: `error__none`}>Нельзя вводить пробелы!</span>\r\n        <button className=\"login__btn\">Войти</button>\r\n      </form>\r\n    </div>\r\n  );\r\n}","export default function Main({currentUser}) {\r\n  return (\r\n    <div className=\"card\">\r\n      <h3 className=\"card__name\">{`${currentUser.name.first} ${currentUser.name.last}`}</h3>\r\n      <img className=\"card__img\" src={currentUser.picture.large} alt={`Аватар пользователя ${currentUser.name.first} ${currentUser.name.last}`}/>\r\n    </div>\r\n  )\r\n}","import React, {useState, useEffect} from 'react';\nimport { Redirect, Route, Switch, useHistory } from 'react-router-dom';\nimport ProtectedRoute from '../ProtectedRoute';\nimport Login from '../Login/Login';\nimport Main from '../Main/Main';\n\nfunction App() {\n\n  const [isLoggedIn, setIsLoggedIn] = useState(false);\n  const [userInfo, setUserInfo] = useState({\n    name: '',\n    password: '',\n  });\n  const history = useHistory();\n\n  useEffect(() => {\n    if (isLoggedIn) {\n      history.push('/main')\n    }\n  }, [isLoggedIn]);\n\n  function onLogin(data){\n    const name = data.name;\n    const password = data.password;\n    setUserInfo({name, password})\n    setIsLoggedIn(true);\n  }\n\n  function apiGetUser(){\n    return fetch(`https://randomuser.me/api/`, {\n      method: 'GET',\n      headers: {\n        'Content-Type': 'application/json'\n      }\n    })\n      .then(res => {\n        if (res.ok) {\n          return res.json();\n        }\n        return Promise.reject(new Error(`Шэф, усё пропало ${res.status}`))\n      })\n  }\n\n  const [currentUser, setCurrentUser] = useState({});\n\n  useEffect(()=>{\n    apiGetUser()\n    .then((res)=>{\n      setCurrentUser(...res.results)\n    })\n    .catch(err=>console.log(err))\n  \n  }, [])\n\n  return (\n    <div className=\"main\">\n      {/* <Login/> */}\n      <Switch>\n        <ProtectedRoute\n          path=\"/main\"\n          isLoggedIn={isLoggedIn}\n          userInfo={userInfo}\n          component={Main}\n          currentUser={currentUser}\n        />\n        <Route path='/randomuseravatar'>\n          <Login onLogin={onLogin}/>\n        </Route>\n        <Route>\n            {isLoggedIn ? <Redirect to=\"/main\" /> : <Redirect to=\"/randomuseravatar\" />}\n          </Route>\n      </Switch>\n    </div>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './component/App/App';\nimport { BrowserRouter } from 'react-router-dom';\n\nReactDOM.render(\n  <React.StrictMode>\n    <BrowserRouter>\n      <App />\n    </BrowserRouter>\n  </React.StrictMode>,\n  document.getElementById('root')\n);"],"sourceRoot":""}